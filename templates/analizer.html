<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–§–∞–π–ª–æ–≤—ã–π –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä</title>
    <link rel="stylesheet" href="/static/style_analizer.css">
</head>
<body>
    <h1>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞</h1>
    <h2>–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏ –∑–∞–Ω–∏–º–∞—é—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –º–µ—Å—Ç–∞.</h2>

    {% if error %}
        <p class="error">{{ error }}</p>
    {% endif %}

    {% if not is_drive_list %}
        {% if parent_path %}
            <a href="/analizer/{{ parent_path | urlencode }}" class="back-btn">‚¨Ö –ù–∞–∑–∞–¥</a>
        {% endif %}
        <a href="/analizer" class="back-btn">üè† –ö —Å–ø–∏—Å–∫—É –¥–∏—Å–∫–æ–≤</a>
    {% endif %}

    {% if is_drive_list %}
        <h3>–î–∏—Å–∫–∏:</h3>
        <ul>
            {% for drive in items %}
                <li class="item">
                    <div class="name">
                        üíΩ <a href="/analizer/{{ drive.name | urlencode }}">{{ drive.name }}</a>
                    </div>
                    <div class="size">
                        {% if drive.size < 1024 %}
                            {{ drive.size }} –±–∞–π—Ç
                        {% elif drive.size < 1024 * 1024 %}
                            {{ (drive.size / 1024)|round(1) }} –ö–ë
                        {% elif drive.size < 1024 * 1024 * 1024 %}
                            {{ (drive.size / (1024 * 1024))|round(1) }} –ú–ë
                        {% else %}
                            {{ (drive.size / (1024 * 1024 * 1024))|round(2) }} –ì–ë
                        {% endif %}
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <h3>–ü–∞–ø–∫–∞: {{ path }}</h3>
        <ul>
            {% for item in items %}
            <li class="item">
                <div class="name">
                    {% if item.type == 'dir' %}
                        üìÅ <a href="/analizer/{{ (path.rstrip('/') + '/' + item.name) | urlencode }}">{{ item.name }}</a>
                    {% else %}
                        üìÑ {{ item.name }}
                    {% endif %}
                </div>
                <div class="size">
                    {% if item.size < 1024 %}
                        {{ item.size }} –±–∞–π—Ç
                    {% elif item.size < 1024 * 1024 %}
                        {{ (item.size / 1024)|round(1) }} –ö–ë
                    {% elif item.size < 1024 * 1024 * 1024 %}
                        {{ (item.size / (1024 * 1024))|round(1) }} –ú–ë
                    {% else %}
                        {{ (item.size / (1024 * 1024 * 1024))|round(2) }} –ì–ë
                    {% endif %}
                </div>
            </li>
            {% endfor %}
        </ul>
    {% endif %}
</body>
</html>
